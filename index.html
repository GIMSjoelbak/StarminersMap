<!DOCTYPE html>
<html lang ="en">
<head>
<meta http-equiv="Access-Control-Allow-Origin" content="*" />
  <base target="_top">
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
     integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
     crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
     integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
     crossorigin=""></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <style>
body {
      padding: 0;
      margin: 0;
    }
html, body, #map {
      height: 100%;
      width: 100%;
    }
table {
	border-collapse: collapse;
	font-size: 12px;
}

td, th {
	padding: 2px;
	border: 1px solid black;
}	    
.popup {
	overflow: auto;
	maxwidth: 300px;
	  }
  </style>
  </head>
  <body>	  			
    <div id="map"</div>
	  <script src="coordinates.js"></script>
	  	  <script>
		  var polygon1 = L.polygon([
			  [1300,4855],
			  [1215,4890],
			  [1200,5530],
			  [1855,5410],
			  [2020,5425],
			  [2130,5190],
			  [2430,5180],
			  [2485,5145],
			  [2470,5085],
			  [2292,4810],
			  [2190,4705],
			  [2020,4695],
			  [1960,4805],
			  [1915,4840]
			  ]).addTo(map);
		  
		  var polygon2 = L.polygon([
			  [1582,4502],
			  [1565,2965],
			  [1420,2865],
			  [1135,2838],
			  [900,3065],
			  [855,3280],
			  [1107,4394],
			  [1435,4550],
			  [1550,4538]
			  ]).addTo(map);

  // add the table data to the popup
  function createPopup(polygon, location) {
    var table = document.createElement("table");

    // add the header row to the table
    var headerRow = table.insertRow();
    var header1 = headerRow.insertCell(0);
    var header2 = headerRow.insertCell(1);
    var header3 = headerRow.insertCell(2);
    var header4 = headerRow.insertCell(3);
    var header5 = headerRow.insertCell(4);
    header1.innerHTML = "<b>Location</b>";
    header2.innerHTML = "<b>World</b>";
    header3.innerHTML = "<b>Min Time</b>";
    header4.innerHTML = "<b>Max Time</b>";
    header5.innerHTML = "<b>Called Location</b>";

  // make a request to the JSON file
  fetch("stars.json")
    .then(response => response.json())
    .then(data => {
for (var i = 0; i < data.length; i++) {
        if (data[i].location === location) {
        var row = table.insertRow();
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
        var cell5 = row.insertCell(4);
        cell1.innerHTML = data[i].location;
        cell2.innerHTML = data[i].world;
        cell3.innerHTML = data[i].minTime;
        cell4.innerHTML = data[i].maxTime;
        cell5.innerHTML = data[i].calledLocation;
      }
}
     // create the popup and add the table to it
      var popup = L.popup().setContent(table);
      polygon.bindPopup(popup);
  })
		.catch(error => console.error(error));
	}
// Add popup tables to each polygon
createPopup(polygon1, 1);
createPopup(polygon2, 2);
	  </script>
  </body>
 </html>
  
      
  
